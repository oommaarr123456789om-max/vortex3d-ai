<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Viewer</title>
    <style>
        body {
            background-color: #121212;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        #drop-zone {
            border: 2px dashed #ffffff;
            width: 300px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        #countdown {
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="glass" id="drop-zone">Drag & Drop your GLB/OBJ files here</div>
    <div id="countdown">10:00</div>
    <div id="viewer" style="width: 600px; height: 400px;"></div>
    <a id="downloadLink" style="display:none;"></a>
    <script src="https://threejs.org/build/three.min.js"></script>
    <script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://threejs.org/examples/js/loaders/OBJLoader.js"></script>
    <script>
        let countdown = 600;
        const countdownElement = document.getElementById('countdown');
        const dropZone = document.getElementById('drop-zone');

        // Countdown Timer
        setInterval(() => {
            if (countdown > 0) {
                countdown--;
                const minutes = Math.floor(countdown / 60);
                const seconds = countdown % 60;
                countdownElement.innerText = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        }, 1000);

        // Drag and Drop
        dropZone.addEventListener('dragover', (event) => {
            event.preventDefault();
        });

        dropZone.addEventListener('drop', (event) => {
            event.preventDefault();
            const file = event.dataTransfer.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                loadModel(file.name.endsWith('.glb') ? 'GLTFLoader' : 'OBJLoader', url);
            }
        });

        // Load 3D Model
        function loadModel(loaderType, url) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(600, 400);
            document.getElementById('viewer').appendChild(renderer.domElement);
            
            const light = new THREE.AmbientLight(0x404040);
            scene.add(light);
            camera.position.z = 5;

            if (loaderType === 'GLTFLoader') {
                const loader = new THREE.GLTFLoader();
                loader.load(url, (gltf) => {
                    scene.add(gltf.scene);
                    animate();
                });
            } else {
                const loader = new THREE.OBJLoader();
                loader.load(url, (object) => {
                    scene.add(object);
                    animate();
                });
            }

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
        }
    </script>
</body>
</html>
